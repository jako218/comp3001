{% include "./telehex/header.html" %}

<style>

.axis path,
.axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}

.axis text {
    font-family: sans-serif;
    font-size: 11px;
}


</style>

<script src="http://d3js.org/d3.v3.min.js"></script>

<div class="container">
    <div class="row">
        <div class="charts">
        
        </div>
    </div>
</div>

<script>

    var width = 1000;
    var height = 400;
    var barPadding = 4;

    d3.json("/graph_data/{{ show.url_string }}", function(error, data){

        for(series_num in data){
            var series = data[series_num];
 
            var barWidth = width / series.length;

            var y = d3.scale.linear()
                    .range([height, 0])
                    .domain([0,10]);

           var yAxis = d3.svg.axis()
                      .scale(y)
                      .orient("left")
                      .ticks(5);
            
            var chartclass = ".charts_" + series_num;

            var svg = d3.select(".charts")
                        .append("svg")
                        .attr("class", chartclass)
                        .attr("width", width)
                        .attr("height", height);

            var bar = svg.selectAll("g")
                        .data(series)
                        .enter().append("g")
                        .attr("transform", function(d, i) { return "translate(" + i * barWidth + ", 0)"; })
                        .attr("fill", function(d) {
                            return "rgb(" + (d*10) + ", 0, 0)";
                        });
            
            bar.append("rect")
                  .attr("y", function(d) { return y(d); })
                  .attr("height", function(d) { return height - y(d); })
                  .attr("width", barWidth - barPadding);
            
            svg.selectAll("text")
                   .data(series)
                   .enter()
                   .append("text")
                   .text(function(d) {
                        return d;
                   })
                   .attr("text-anchor", "middle")
                   .attr("x", function(d, i) {
                        return i * (width / series.length) + (width / series.length - barPadding) / 2;
                   })
                   .attr("y", function(d) {
                        return y(d) + 20;
                   })
                   .attr("font-family", "sans-serif")
                   .attr("font-size", "11px")
                   .attr("fill", "white");
        }
    });
</script>


{% include "./telehex/footer.html" %}
