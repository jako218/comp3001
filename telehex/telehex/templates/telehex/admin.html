{% load apptags %}
{% include "./telehex/header.html" %}

<div class="container">
    {% if is_admin %}
    <h1>All Scraped Shows</h1>
    <div class="row">
        <table id="scraped-table" class="table seasontable">
            <thead style="font-weight: bold;">
                <tr>
                    <th>ID</th>
                    <th>Show Name</th>
                    <th>Users Subscribed</th>
                    <th>Last Scraped</th>
                    <th>&nbsp;</th>
                </tr>
            </thead>
            {% for show in show_iterator %}
            <tr>
                <td>{{ show.key.name }}</td>
                <td><a href="/show/{{ show.url_string }}">{{ show.title }}</a></td>
                <td>{% if subs_counts|get_item:show.key.name %}{{ subs_counts|get_item:show.key.name }}{% else %}0{% endif %}</td>
                <td>{{ show.last_scraped }}</td>
                <td><a href="/scrape/{{show.key.name}}?force=1">Rescrape</a></td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% else %}
    <h1>You're not an admin.</h1>
    {% endif %}
</div>

<script>
$(document).ready(function() {
    $('#scraped-table').tablesorter({
        headers: { 4: { sorter: false } },
        sortList: [[1,0]]
    });
});
</script>

{% include "./telehex/footer.html" %}
